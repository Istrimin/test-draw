<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.4.5/jscolor.min.js"></script>
    <script src="cursors.js" defer></script>
    <script src="script.js" defer></script>
    <script type="module" src="tools.js" defer></script>
    <script type="module" src="hotkey.js" defer></script>
    <script type="module" src="test.js" defer></script>
    <script type="module" src="settings.js" defer></script>
    <script type="module" src="helperFunction.js" defer></script>
    <style>
        .color-palette {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .color-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            border: 1px solid black;
        }
        .word-navigation {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            z-index: 10;
        }
        .word-navigation button {
            margin: 0 10px;
        }

/* Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ»Ğ¾Ñ€Ğ¿Ğ¸ĞºĞµÑ€Ğ¾Ğ² */


    </style>
</head>
<body>
    <div class="header-container">
        <div id="time" class="time"></div>
        <div id="startTime" class="time"></div>
        <div id="elapsedTime" class="time"></div>
    </div>
    <div class="base-container">
        <div class="sidebar">
            <!-- <a href="index.html" target="_self" title="Ğ’Ñ‹Ğ¹Ñ‚Ğ¸ Ğ¸Ğ· ĞºĞ¾Ğ¼Ğ°Ğ½Ñ‚Ñ‹">ğŸšª</a> -->


<a href="index.html" target="_self" title="Ğ’Ñ‹Ğ¹Ñ‚Ğ¸ Ğ¸Ğ· ĞºĞ¾Ğ¼Ğ°Ğ½Ñ‚Ñ‹" id="exitLink">ğŸšª</a>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>

            <button id="myBtn" title="Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ">âœ‰ï¸</button>
            <div id="message-container" style="display: none;">
                <p id="message"></p>
            </div>
            <input type="file" id="imageInput" accept="image/*" style="display: none;">
            <button id="UploadButton" title="Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ (U)">ğŸŒº</button>
            <button id="saveImageBtn" title="Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ">ğŸ¬</button>
            <button id="changeCursorBtn" title="Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ĞºÑƒÑ€ÑĞ¾Ñ€">ğŸ¨</button>
            <button id="undo" title="ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ (Z)">âŸ²</button>
            <button id="redo" title="ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ (X)">âŸ³</button>
            <button id="clear" title="ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ">ğŸ’€</button>
            <button id="symmetry" title="Ğ¡Ğ¸Ğ¼Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ (S)">ğŸ¦‹</button>
            <button id="fillModeBtn" title="Ğ—Ğ°Ğ»Ğ¸Ğ²ĞºĞ° (F)">ğŸŒŠ</button>
            <button id="floodFillBtn" title="Ğ—Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ¼">âœ¨</button>
            <button id="eyedropperBtn" title="ĞŸĞ¸Ğ¿ĞµÑ‚ĞºĞ° Ğ·Ğ°Ğ»Ğ¸Ğ²ĞºĞ¸ (A)">ğŸ’§</button>
            <button id="brushEyedropperBtn" title="ĞŸĞ¸Ğ¿ĞµÑ‚ĞºĞ° ĞºĞ¸ÑÑ‚Ğ¸ (D)">ğŸ–Œï¸</button>


            <div id="cursorPanel" class="cursor-panel" style="display: none;">
                <h3>Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ĞºÑƒÑ€ÑĞ¾Ñ€</h3>
                <div id="cursorList"></div>
            </div>
            <button id="settings" title="ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸">âš™ï¸</button>
        </div>
        <div class="canvas-and-sliders">
            <div class="canvas-container">
                <div class="word-navigation">
                    <button id="previousWord" title="ĞŸÑ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞµ ÑĞ»Ğ¾Ğ²Ğ¾">&lt;</button>
                    <p id="Quizz"></p>
                    <button id="nextWord" title="Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ ÑĞ»Ğ¾Ğ²Ğ¾">&gt;</button>
                </div>
<div class="color-picker-group"> 

    <input type="color" id="colorPicker" value="#000000" title="Ğ¦Ğ²ĞµÑ‚ Ğ·Ğ°Ğ»Ğ¸Ğ²ĞºĞ¸ (C)"> 
    <input type="color" id="backgroundPicker" value="#eeaaff" title="Ğ¦Ğ²ĞµÑ‚ Ñ„Ğ¾Ğ½Ğ° (B)">

    <input type="color" id="colorPicker3" value="#ff0000" title="Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ 3">  
    <input type="color" id="colorPicker4" value="#ffa500" title="Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ 4"> 
    <input type="color" id="colorPicker5" value="#ffff00" title="Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ 5">     
    <input type="color" id="colorPicker6" value="#008000" title="Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ 6"> 
    <input type="color" id="colorPicker7" value="#00ffff" title="Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ 7"> 
    <input type="color" id="colorPicker8" value="#0000ff" title="Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ 8"> 
    <input type="color" id="colorPicker9" value="#800080" title="Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ 9"> 
				<div class=" canv-container">
					<canvas id="drawingCanvas" width="700" height="500" style=width:700px;height:500px>
					</canvas>
					<div id="cursorPanel" class="cursor-panel" style="display: none;">
						<div id="cursorList"></div>
					</div>
				</div>
            <div class="slider-group">
                <div class="tools-column">
                    <label for="opacity" title="ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ">ğŸ‘»</label>
                    <input type="range" id="opacity" min="1" max="100" value="100">
                </div>
                <div class="tools-column">
                    <div class="pressure-bar" id="pressureBar"></div>
                    <label for="brushSize" title="Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ĞºĞ¸ÑÑ‚Ğ¸">ğŸ–Œï¸</label>
                    <input type="range" id="brushSize" min="1" max="100" value="1">
                </div>
                <div class="color-palette" id="colorPalette"></div>
            </div>
        </div>
    </div>

<script>
const canvas = document.getElementById('drawingCanvas');
const ctx = canvas.getContext('2d');
ctx.imageSmoothingEnabled = false;
ctx.willReadFrequently = true;



// Eyedroppers

function toggleEyedropper() {
  isEyedropperActive = !isEyedropperActive;

//   isBrushEyedropperActive = false;
  canvas.style.cursor = isEyedropperActive ? 'url(cursors/pipette.png), auto' : 'default';
}

canvas.style.cursor = 'url(cursors/pipette.png), auto';

function toggleEyedropper() {
  isEyedropperActive = !isEyedropperActive;
  isBrushEyedropperActive = false;
  canvas.style.cursor = isEyedropperActive ? 'url(cursors/pipette.png), auto' : 'default';
}
    document.getElementById('eyedropperBtn').addEventListener('click', toggleEyedropper);
    document.getElementById('brushEyedropperBtn').addEventListener('click', toggleBrushEyedropper);

    function toggleBrushEyedropper() {
        isBrushEyedropperActive = !isBrushEyedropperActive;
        isEyedropperActive = false;
        canvas.style.cursor = isBrushEyedropperActive ? 'url(cursors/pipette.png), auto' : 'default';
    }


document.addEventListener('keydown', function(event) {
    if (event.key.toLowerCase() === 'd') {
        // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ ĞºÑƒÑ€ÑĞ¾Ñ€Ğ°
        var rect = canvas.getBoundingClientRect();
var x = Math.floor(event.clientX - rect.left);
var y = Math.floor(event.clientY - rect.top);

// Now x and y will always be integers
var imageData = ctx.getImageData(x, y, 1, 1);

        // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ñ†Ğ²ĞµÑ‚ Ğ¿Ğ¸ĞºÑĞµĞ»Ñ Ğ¿Ğ¾Ğ´ ĞºÑƒÑ€ÑĞ¾Ñ€Ğ¾Ğ¼
        var imageData = ctx.getImageData(x, y, 1, 1);
        var pixel = imageData.data;

        // ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞµĞ¼ RGB Ğ² HEX
        var color = "#" + ("000000" + rgbToHex(pixel[0], pixel[1], pixel[2])).slice(-6);

        // Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ ÑÑ‚Ğ¾Ñ‚ Ñ†Ğ²ĞµÑ‚ Ğ´Ğ»Ñ 3-Ğ³Ğ¾ ĞºĞ¾Ğ»Ğ¾Ñ€Ğ¿Ğ¸ĞºĞµÑ€Ğ°
        document.getElementById('colorPicker3').value = color;

        // Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ ÑÑ‚Ğ¾Ñ‚ Ñ†Ğ²ĞµÑ‚ Ğ² ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğµ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ñ†Ğ²ĞµÑ‚Ğ° Ñ€Ğ¸ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ
        ctx.strokeStyle = color;
        ctx.fillStyle = color;

        // Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ
        console.log('Ğ¦Ğ²ĞµÑ‚ ĞºĞ¸ÑÑ‚Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½ Ğ½Ğ°: ' + color);
    }
});

// Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ RGB Ğ² HEX
function rgbToHex(r, g, b) {
    if (r > 255 || g > 255 || b > 255)
        throw "Invalid color component";
    return ((r << 16) | (g << 8) | b).toString(16);
}





</script>

</body>
</html>
