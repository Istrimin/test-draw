<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç–æ—è—â–∏–π –•—É–¥–æ–∂–Ω–∏–∫</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.4.5/jscolor.min.js"></script>
    <script src="cursors.js" defer></script>
    <script src="script.js" defer></script>
    <script type="module" src="tools.js" defer></script>
    <script type="module" src="hotkey.js" defer></script>
    <script type="module" src="test.js" defer></script>
    <script type="module" src="settings.js" defer></script>
    <script type="module" src="helperFunction.js" defer></script>
    <style>
        .color-palette {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .color-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            border: 1px solid black;
        }
        .word-navigation {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            z-index: 10;
        }
        .word-navigation button {
            margin: 0 10px;
        }

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–ª–æ—Ä–ø–∏–∫–µ—Ä–æ–≤ */


    </style>
</head>
<body>
    <div class="header-container">
        <div id="time" class="time"></div>
        <div id="startTime" class="time"></div>
        <div id="elapsedTime" class="time"></div>
    </div>
    <div class="base-container">
        <div class="sidebar">
            <!-- <a href="index.html" target="_self" title="–í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–∞–Ω—Ç—ã">üö™</a> -->


<a href="index.html" target="_self" title="–í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–∞–Ω—Ç—ã" id="exitLink">üö™</a>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>

            <button id="myBtn" title="–°–æ–æ–±—â–µ–Ω–∏–µ">‚úâÔ∏è</button>
            <div id="message-container" style="display: none;">
                <p id="message"></p>
            </div>
            <input type="file" id="imageInput" accept="image/*" style="display: none;">
            <button id="UploadButton" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (U)">üå∫</button>
            <button id="saveImageBtn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üé¨</button>
            <button id="changeCursorBtn" title="–°–º–µ–Ω–∏—Ç—å –∫—É—Ä—Å–æ—Ä">üé®</button>
            <button id="undo" title="–û—Ç–º–µ–Ω–∏—Ç—å (Z)">‚ü≤</button>
            <button id="redo" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å (X)">‚ü≥</button>
            <button id="clear" title="–û—á–∏—Å—Ç–∏—Ç—å">üíÄ</button>
            <button id="symmetry" title="–°–∏–º–º–µ—Ç—Ä–∏—è (S)">ü¶ã</button>
            <button id="fillModeBtn" title="–ó–∞–ª–∏–≤–∫–∞ (F)">üåä</button>
            <button id="floodFillBtn" title="–ó–∞–ª–∏—Ç—å —Ü–≤–µ—Ç–æ–º">‚ú®</button>
            <button id="eyedropperBtn" title="–ü–∏–ø–µ—Ç–∫–∞ –∑–∞–ª–∏–≤–∫–∏ (A)">üíß</button>
            <button id="brushEyedropperBtn" title="–ü–∏–ø–µ—Ç–∫–∞ –∫–∏—Å—Ç–∏ (D)">üñåÔ∏è</button>


            <div id="cursorPanel" class="cursor-panel" style="display: none;">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å–æ—Ä</h3>
                <div id="cursorList"></div>
            </div>
            <button id="settings" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
        </div>
        <div class="canvas-and-sliders">
            <div class="canvas-container">
                <div class="word-navigation">
                    <button id="previousWord" title="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–ª–æ–≤–æ">&lt;</button>
                    <p id="Quizz"></p>
                    <button id="nextWord" title="–°–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ">&gt;</button>
                </div>
<div class="color-picker-group"> 

    <input type="color" id="colorPicker" value="#000000" title="–¶–≤–µ—Ç –∑–∞–ª–∏–≤–∫–∏ (C)"> 
    <input type="color" id="backgroundPicker" value="#eeaaff" title="–¶–≤–µ—Ç —Ñ–æ–Ω–∞ (B)">

    <input type="color" id="colorPicker3" value="#ff0000" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ 3">  
    <input type="color" id="colorPicker4" value="#ffa500" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ 4"> 
    <input type="color" id="colorPicker5" value="#ffff00" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ 5">     
    <input type="color" id="colorPicker6" value="#008000" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ 6"> 
    <input type="color" id="colorPicker7" value="#00ffff" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ 7"> 
    <input type="color" id="colorPicker8" value="#0000ff" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ 8"> 
    <input type="color" id="colorPicker9" value="#800080" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ 9"> 
				<div class=" canv-container">
					<canvas id="drawingCanvas" width="700" height="500" style=width:700px;height:500px>
					</canvas>
					<div id="cursorPanel" class="cursor-panel" style="display: none;">
						<div id="cursorList"></div>
					</div>
				</div>
            <div class="slider-group">
                <div class="tools-column">
                    <label for="opacity" title="–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å">üëª</label>
                    <input type="range" id="opacity" min="1" max="100" value="100">
                </div>
                <div class="tools-column">
<progress id="pressureBar" value="0" max="100"></progress>

                    <label for="brushSize" title="–†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏">üñåÔ∏è</label>
                    <input type="range" id="brushSize" min="1" max="100" value="1">
                </div>
                <div class="color-palette" id="colorPalette">—Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞</div>
            </div>
        </div>
    </div>

<script>
const canvas = document.getElementById('drawingCanvas');
const ctx = canvas.getContext('2d');
// ctx.imageSmoothingEnabled = false;
ctx.willReadFrequently = true;



// Eyedroppers

function toggleEyedropper() {
  isEyedropperActive = !isEyedropperActive;

//   isBrushEyedropperActive = false;
  canvas.style.cursor = isEyedropperActive ? 'url(cursors/pipette.png), auto' : 'default';
}

canvas.style.cursor = 'url(cursors/pipette.png), auto';

function toggleEyedropper() {
  isEyedropperActive = !isEyedropperActive;
  isBrushEyedropperActive = false;
  canvas.style.cursor = isEyedropperActive ? 'url(cursors/pipette.png), auto' : 'default';
}
    document.getElementById('eyedropperBtn').addEventListener('click', toggleEyedropper);
    document.getElementById('brushEyedropperBtn').addEventListener('click', toggleBrushEyedropper);

    function toggleBrushEyedropper() {
        isBrushEyedropperActive = !isBrushEyedropperActive;
        isEyedropperActive = false;
        canvas.style.cursor = isBrushEyedropperActive ? 'url(cursors/pipette.png), auto' : 'default';
    }


document.addEventListener('keydown', function(event) {
    if (event.key.toLowerCase() === 'd') {
        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞
        var rect = canvas.getBoundingClientRect();
var x = Math.floor(event.clientX - rect.left);
var y = Math.floor(event.clientY - rect.top);

// Now x and y will always be integers
var imageData = ctx.getImageData(x, y, 1, 1);

        // –ü–æ–ª—É—á–∞–µ–º —Ü–≤–µ—Ç –ø–∏–∫—Å–µ–ª—è –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º
        var imageData = ctx.getImageData(x, y, 1, 1);
        var pixel = imageData.data;

        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º RGB –≤ HEX
        var color = "#" + ("000000" + rgbToHex(pixel[0], pixel[1], pixel[2])).slice(-6);

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —ç—Ç–æ—Ç —Ü–≤–µ—Ç –¥–ª—è 3-–≥–æ –∫–æ–ª–æ—Ä–ø–∏–∫–µ—Ä–∞
        document.getElementById('colorPicker3').value = color;

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —ç—Ç–æ—Ç —Ü–≤–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Ü–≤–µ—Ç–∞ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
        ctx.strokeStyle = color;
        ctx.fillStyle = color;

        // –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        console.log('–¶–≤–µ—Ç –∫–∏—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: ' + color);
    }
});

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è RGB –≤ HEX
function rgbToHex(r, g, b) {
    if (r > 255 || g > 255 || b > 255)
        throw "Invalid color component";
    return ((r << 16) | (g << 8) | b).toString(16);
}

</script>

</body>
</html>
