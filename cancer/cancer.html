<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Draw</title>
	<link rel="stylesheet" href="cancer.css">
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.4.5/jscolor.min.js"></script>
	<script src="cancerCursors.js" defer></script>
	<script src="cancer.js" defer></script>

	<script type="module" src="cancerSettings.js" defer></script>
	<script type="module" src="cancerHelper.js" defer></script>
	<script type="module" src="cancerHotkey.js" defer></script>
	<style>
		#symmetry {
		/* ... (–≤–∞—à–∏ —Å—Ç–∏–ª–∏) */
	}

	/* –°—Ç–∏–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ —Å–∏–º–º–µ—Ç—Ä–∏–∏ */
	#symmetry.active {
		background-color: lightblue; /* –ò–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ü–≤–µ—Ç */
	}
	</style>
</head>

<body>
	<div class="header-container">
		<div id="time" class="time"></div>
		<div id="startTime" class="time"></div>
		<div id="elapsedTime" class="time"></div>
	</div>
	<div class="base-container">
		<div class="sidebar">
			<a href="index.html" target="_self" title="–í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–∞–Ω—Ç—ã" id="exitLink">üö™</a>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
			<div id="message-container" style="display: none;">
				<p id="message"></p>
			</div>
			<input type="file" id="imageInput" accept="image/*" style="display: none;">
			<button id="undo" title="–û—Ç–º–µ–Ω–∏—Ç—å (Z)">‚ü≤</button>
			<button id="redo" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å (X)">‚ü≥</button>
			<button id="symmetry" title="–°–∏–º–º–µ—Ç—Ä–∏—è (S)">ü¶ã</button>
			<button id="eyedropperBtn" title="–ü–∏–ø–µ—Ç–∫–∞ –∑–∞–ª–∏–≤–∫–∏ (A)">üíß</button>
			<button id="changeCursorBtn" title="–°–º–µ–Ω–∏—Ç—å –∫—É—Ä—Å–æ—Ä">üé®</button>
			<button id="clear" title="–û—á–∏—Å—Ç–∏—Ç—å">üíÄ</button>
			<button id="saveImageBtn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üíæ</button>
		</div>
		<div class="canvas-and-sliders">
			<div class="canvas-container">

				<div class="color-picker-group">
					<input type="color" id="colorPicker" value="#000000" title="–¶–≤–µ—Ç –∑–∞–ª–∏–≤–∫–∏ (C)">
					<input type="color" id="backgroundPicker" value="#ffffff" title="–¶–≤–µ—Ç —Ñ–æ–Ω–∞ (B)">
					<!-- <div class="word-navigation"> -->
					<button id="previousWord" title="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–ª–æ–≤–æ">&lt;</button>
					<p id="Quizz"></p>
					<button id="nextWord" title="–°–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ">&gt;</button>
					<!-- </div> -->
				</div>

				<div class=" canv-container">
					<canvas id="drawingCanvas" width="700" height="500" style=width:700px;height:500px>
					</canvas>
					<div id="cursorPanel" class="cursor-panel" style="display: none;">
						<div id="cursorList"></div>
					</div>
				</div>
			</div>
			<div class="slider-group">
				<div class="slider">
					<div class="pressure-bar" id="pressureBar"></div>
					<label for="brushSize" title="–†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏">üñåÔ∏è</label>
					<input type="range" id="brushSize" min="1" max="100" value="1">
				</div>
			</div>
		</div>
	</div>
	<script>
// –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã colorPicker –∏ drawingCanvas
const colorPicker = document.getElementById('colorPicker');
const canvas = document.getElementById('drawingCanvas');
const ctx = canvas.getContext('2d'); // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ö–æ–ª—Å—Ç–∞
const symmetryButton = document.getElementById('symmetry');

ctx.imageSmoothingEnabled = false;
ctx.willReadFrequently = true;
let symmetry = false; // –§–ª–∞–≥ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–∏–º–º–µ—Ç—Ä–∏–∏
	
// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è 'input' –¥–ª—è colorPicker
colorPicker.addEventListener('input', () => {
  ctx.strokeStyle = colorPicker.value; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç —Ä–∏—Å–æ–≤–∞–Ω–∏—è
});
symmetryButton.addEventListener('click', toggleSymmetry);

// –í–Ω—É—Ç—Ä–∏ —Ç–µ–≥–∞ <script> –≤ cancer.html

// ... (–æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥)


function toggleSymmetry() {
    symmetry = !symmetry;
    symmetryButton.classList.toggle('active', symmetry);
}

// ... (–∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–≤–µ—Ç–∞ –∏ —Ç.–¥.)

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è

function saveState() {
    history.push(ctx.getImageData(0, 0, canvas.width, canvas.height));
    redoHistory = [];
}


canvas.addEventListener('pointerdown', startDrawing);
canvas.addEventListener('pointermove', draw);
canvas.addEventListener('pointerup', stopDrawing);
canvas.addEventListener('pointerout', stopDrawing);
canvas.addEventListener('pointercancel', stopDrawing);

function startDrawing(e) {
    isDrawing = true;
    [lastX, lastY] = [e.offsetX, e.offsetY];
}

function draw(e) {
  if (!isDrawing) return;

  e.preventDefault(); 
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  const pressure = e.pressure || 1; 

  ctx.lineWidth = brushSizeInput.value * pressure;
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';

  // Draw the main line
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
  ctx.lineTo(x, y);
  ctx.stroke();

  if (symmetry) {
    // Calculate the mirrored point
    const centerX = canvas.width / 2;
    const symmetricX = 2 * centerX - x;

    // Draw the mirrored line
    ctx.beginPath();
    ctx.moveTo(2 * centerX - lastX, lastY);
    ctx.lineTo(symmetricX, y);
    ctx.stroke();
  }

  [lastX, lastY] = [x, y];
}


function stopDrawing() {
    if (isDrawing) {
        isDrawing = false;
        saveState();
    }
}


// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–°–∏–º–º–µ—Ç—Ä–∏—è"
const symmetryBtn = document.getElementById('symmetry');
symmetryBtn.addEventListener('click', () => {
  symmetry = !symmetry; // –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ —Å–∏–º–º–µ—Ç—Ä–∏–∏
  symmetryBtn.classList.toggle('active', symmetry); 	
});


symmetryBtn.addEventListener('click', () => {
  symmetry = !symmetry; // –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ —Å–∏–º–º–µ—Ç—Ä–∏–∏
  symmetryBtn.classList.toggle('active', symmetry); // –î–æ–±–∞–≤–ª—è–µ–º/—É–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å 'active'
});

document.addEventListener('DOMContentLoaded', () => {
    // ... (–≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥) ...

    const cursorPanel = document.getElementById('cursorPanel');
    const cursorList = document.getElementById('cursorList');
    const changeCursorBtn = document.getElementById('changeCursorBtn');

    function loadCursors() {
        cursorList.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –∫—É—Ä—Å–æ—Ä–æ–≤

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—É—Ä—Å–æ—Ä—ã –æ—Ç cursor1 –¥–æ cursor10 (–∏–ª–∏ —Å–∫–æ–ª—å–∫–æ —É –≤–∞—Å –µ—Å—Ç—å)
        for (let i = 1; i <= 10; i++) {
            const cursorUrl = `cursors/${i}.png`; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ - cursor1.png, cursor2.png –∏ —Ç.–¥.

            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫—É—Ä—Å–æ—Ä–∞
            const cursorImg = document.createElement('img');
            cursorImg.src = cursorUrl;
            cursorImg.alt = `cursor${i}`; // –∏–º—è –∫—É—Ä—Å–æ—Ä–∞
            cursorImg.classList.add('cursor-option'); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫—É—Ä—Å–æ—Ä
            cursorImg.addEventListener('click', () => {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫—É—Ä—Å–æ—Ä –¥–ª—è —Ö–æ–ª—Å—Ç–∞
                canvas.style.cursor = `url(${cursorUrl}), auto`; 

                // –°–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –∫—É—Ä—Å–æ—Ä–æ–≤ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
                cursorPanel.style.display = 'none'; 
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –≤ —Å–ø–∏—Å–æ–∫
            cursorList.appendChild(cursorImg);
        }
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –∫—É—Ä—Å–æ—Ä–æ–≤
    changeCursorBtn.addEventListener('click', () => {
        cursorPanel.style.display = cursorPanel.style.display === 'none' ? 'block' : 'none';
    });

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—É—Ä—Å–æ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    loadCursors();

    // ... (–≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥) ...
});


	</script>
</body>

</html>
